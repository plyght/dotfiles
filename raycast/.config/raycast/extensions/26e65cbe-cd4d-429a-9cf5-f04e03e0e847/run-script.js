"use strict";var kn=Object.create;var L=Object.defineProperty;var Nn=Object.getOwnPropertyDescriptor;var $n=Object.getOwnPropertyNames;var jn=Object.getPrototypeOf,Ln=Object.prototype.hasOwnProperty;var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Bn=(t,e)=>{for(var n in e)L(t,n,{get:e[n],enumerable:!0})},Lt=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of $n(e))!Ln.call(t,o)&&o!==n&&L(t,o,{get:()=>e[o],enumerable:!(r=Nn(e,o))||r.enumerable});return t};var S=(t,e,n)=>(n=t!=null?kn(jn(t)):{},Lt(e||!t||!t.__esModule?L(n,"default",{value:t,enumerable:!0}):n,t)),Un=t=>Lt(L({},"__esModule",{value:!0}),t);var _t=y((Po,Mt)=>{Mt.exports=Ft;Ft.sync=Mn;var Bt=require("fs");function Fn(t,e){var n=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var o=n[r].toLowerCase();if(o&&t.substr(-o.length).toLowerCase()===o)return!0}return!1}function Ut(t,e,n){return!t.isSymbolicLink()&&!t.isFile()?!1:Fn(e,n)}function Ft(t,e,n){Bt.stat(t,function(r,o){n(r,r?!1:Ut(o,t,e))})}function Mn(t,e){return Ut(Bt.statSync(t),t,e)}});var Ht=y((To,Wt)=>{Wt.exports=qt;qt.sync=_n;var Dt=require("fs");function qt(t,e,n){Dt.stat(t,function(r,o){n(r,r?!1:zt(o,e))})}function _n(t,e){return zt(Dt.statSync(t),e)}function zt(t,e){return t.isFile()&&Dn(t,e)}function Dn(t,e){var n=t.mode,r=t.uid,o=t.gid,i=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),s=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),a=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),f=a|c,m=n&u||n&c&&o===s||n&a&&r===i||n&f&&i===0;return m}});var Xt=y((Co,Kt)=>{var Ao=require("fs"),B;process.platform==="win32"||global.TESTING_WINDOWS?B=_t():B=Ht();Kt.exports=tt;tt.sync=qn;function tt(t,e,n){if(typeof e=="function"&&(n=e,e={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,o){tt(t,e||{},function(i,s){i?o(i):r(s)})})}B(t,e||{},function(r,o){r&&(r.code==="EACCES"||e&&e.ignoreErrors)&&(r=null,o=!1),n(r,o)})}function qn(t,e){try{return B.sync(t,e||{})}catch(n){if(e&&e.ignoreErrors||n.code==="EACCES")return!1;throw n}}});var ee=y((Io,te)=>{var T=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Vt=require("path"),zn=T?";":":",Yt=Xt(),Qt=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),Zt=(t,e)=>{let n=e.colon||zn,r=t.match(/\//)||T&&t.match(/\\/)?[""]:[...T?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(n)],o=T?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=T?o.split(n):[""];return T&&t.indexOf(".")!==-1&&i[0]!==""&&i.unshift(""),{pathEnv:r,pathExt:i,pathExtExe:o}},Jt=(t,e,n)=>{typeof e=="function"&&(n=e,e={}),e||(e={});let{pathEnv:r,pathExt:o,pathExtExe:i}=Zt(t,e),s=[],a=u=>new Promise((f,m)=>{if(u===r.length)return e.all&&s.length?f(s):m(Qt(t));let p=r[u],g=/^".*"$/.test(p)?p.slice(1,-1):p,h=Vt.join(g,t),b=!g&&/^\.[\\\/]/.test(t)?t.slice(0,2)+h:h;f(c(b,u,0))}),c=(u,f,m)=>new Promise((p,g)=>{if(m===o.length)return p(a(f+1));let h=o[m];Yt(u+h,{pathExt:i},(b,P)=>{if(!b&&P)if(e.all)s.push(u+h);else return p(u+h);return p(c(u,f,m+1))})});return n?a(0).then(u=>n(null,u),n):a(0)},Wn=(t,e)=>{e=e||{};let{pathEnv:n,pathExt:r,pathExtExe:o}=Zt(t,e),i=[];for(let s=0;s<n.length;s++){let a=n[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,u=Vt.join(c,t),f=!c&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let m=0;m<r.length;m++){let p=f+r[m];try{if(Yt.sync(p,{pathExt:o}))if(e.all)i.push(p);else return p}catch{}}}if(e.all&&i.length)return i;if(e.nothrow)return null;throw Qt(t)};te.exports=Jt;Jt.sync=Wn});var re=y((vo,et)=>{"use strict";var ne=(t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};et.exports=ne;et.exports.default=ne});var ae=y((Oo,se)=>{"use strict";var oe=require("path"),Hn=ee(),Kn=re();function ie(t,e){let n=t.options.env||process.env,r=process.cwd(),o=t.options.cwd!=null,i=o&&process.chdir!==void 0&&!process.chdir.disabled;if(i)try{process.chdir(t.options.cwd)}catch{}let s;try{s=Hn.sync(t.command,{path:n[Kn({env:n})],pathExt:e?oe.delimiter:void 0})}catch{}finally{i&&process.chdir(r)}return s&&(s=oe.resolve(o?t.options.cwd:"",s)),s}function Xn(t){return ie(t)||ie(t,!0)}se.exports=Xn});var ce=y((Go,rt)=>{"use strict";var nt=/([()\][%!^"`<>&|;, *?])/g;function Vn(t){return t=t.replace(nt,"^$1"),t}function Yn(t,e){return t=`${t}`,t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t=`"${t}"`,t=t.replace(nt,"^$1"),e&&(t=t.replace(nt,"^$1")),t}rt.exports.command=Vn;rt.exports.argument=Yn});var fe=y((Ro,ue)=>{"use strict";ue.exports=/^#!(.*)/});var de=y((ko,le)=>{"use strict";var Qn=fe();le.exports=(t="")=>{let e=t.match(Qn);if(!e)return null;let[n,r]=e[0].replace(/#! ?/,"").split(" "),o=n.split("/").pop();return o==="env"?r:r?`${o} ${r}`:o}});var me=y((No,pe)=>{"use strict";var ot=require("fs"),Zn=de();function Jn(t){let n=Buffer.alloc(150),r;try{r=ot.openSync(t,"r"),ot.readSync(r,n,0,150,0),ot.closeSync(r)}catch{}return Zn(n.toString())}pe.exports=Jn});var Se=y(($o,ge)=>{"use strict";var tr=require("path"),he=ae(),ye=ce(),er=me(),nr=process.platform==="win32",rr=/\.(?:com|exe)$/i,or=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function ir(t){t.file=he(t);let e=t.file&&er(t.file);return e?(t.args.unshift(t.file),t.command=e,he(t)):t.file}function sr(t){if(!nr)return t;let e=ir(t),n=!rr.test(e);if(t.options.forceShell||n){let r=or.test(e);t.command=tr.normalize(t.command),t.command=ye.command(t.command),t.args=t.args.map(i=>ye.argument(i,r));let o=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${o}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function ar(t,e,n){e&&!Array.isArray(e)&&(n=e,e=null),e=e?e.slice(0):[],n=Object.assign({},n);let r={command:t,args:e,options:n,file:void 0,original:{command:t,args:e}};return n.shell?r:sr(r)}ge.exports=ar});var we=y((jo,xe)=>{"use strict";var it=process.platform==="win32";function st(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}function cr(t,e){if(!it)return;let n=t.emit;t.emit=function(r,o){if(r==="exit"){let i=be(o,e,"spawn");if(i)return n.call(t,"error",i)}return n.apply(t,arguments)}}function be(t,e){return it&&t===1&&!e.file?st(e.original,"spawn"):null}function ur(t,e){return it&&t===1&&!e.file?st(e.original,"spawnSync"):null}xe.exports={hookChildProcess:cr,verifyENOENT:be,verifyENOENTSync:ur,notFoundError:st}});var Te=y((Lo,A)=>{"use strict";var Ee=require("child_process"),at=Se(),ct=we();function Pe(t,e,n){let r=at(t,e,n),o=Ee.spawn(r.command,r.args,r.options);return ct.hookChildProcess(o,r),o}function fr(t,e,n){let r=at(t,e,n),o=Ee.spawnSync(r.command,r.args,r.options);return o.error=o.error||ct.verifyENOENTSync(o.status,r),o}A.exports=Pe;A.exports.spawn=Pe;A.exports.sync=fr;A.exports._parse=at;A.exports._enoent=ct});var on=y((Ri,rn)=>{"use strict";var{PassThrough:to}=require("stream");rn.exports=function(){var t=[],e=new to({objectMode:!0});return e.setMaxListeners(0),e.add=n,e.isEmpty=r,e.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(n),e;function n(i){return Array.isArray(i)?(i.forEach(n),this):(t.push(i),i.once("end",o.bind(null,i)),i.once("error",e.emit.bind(e,"error")),i.pipe(e,{end:!1}),this)}function r(){return t.length==0}function o(i){t=t.filter(function(s){return s!==i}),!t.length&&e.readable&&e.end()}}});var wo={};Bn(wo,{default:()=>Rn});module.exports=Un(wo);var l=require("@raycast/api");var Pn=require("node:buffer"),Tn=S(require("node:path"),1),Q=S(require("node:child_process"),1),R=S(require("node:process"),1),An=S(Te(),1);function ut(t){let e=typeof t=="string"?`
`:`
`.charCodeAt(),n=typeof t=="string"?"\r":"\r".charCodeAt();return t[t.length-1]===e&&(t=t.slice(0,-1)),t[t.length-1]===n&&(t=t.slice(0,-1)),t}var v=S(require("node:process"),1),C=S(require("node:path"),1),Ae=S(require("node:url"),1);function U(t={}){let{env:e=process.env,platform:n=process.platform}=t;return n!=="win32"?"PATH":Object.keys(e).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"}function lr(t={}){let{cwd:e=v.default.cwd(),path:n=v.default.env[U()],execPath:r=v.default.execPath}=t,o,i=e instanceof URL?Ae.default.fileURLToPath(e):e,s=C.default.resolve(i),a=[];for(;o!==s;)a.push(C.default.join(s,"node_modules/.bin")),o=s,s=C.default.resolve(s,"..");return a.push(C.default.resolve(i,r,"..")),[...a,n].join(C.default.delimiter)}function Ce({env:t=v.default.env,...e}={}){t={...t};let n=U({env:t});return e.path=t[n],t[n]=lr(e),t}var dr=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;let o=Object.getOwnPropertyDescriptor(t,n),i=Object.getOwnPropertyDescriptor(e,n);!pr(o,i)&&r||Object.defineProperty(t,n,i)},pr=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},mr=(t,e)=>{let n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},hr=(t,e)=>`/* Wrapped ${t}*/
${e}`,yr=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),gr=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Sr=(t,e,n)=>{let r=n===""?"":`with ${n.trim()}() `,o=hr.bind(null,r,e.toString());Object.defineProperty(o,"name",gr),Object.defineProperty(t,"toString",{...yr,value:o})};function ft(t,e,{ignoreNonConfigurable:n=!1}={}){let{name:r}=t;for(let o of Reflect.ownKeys(e))dr(t,e,o,n);return mr(t,e),Sr(t,e,r),t}var F=new WeakMap,Ie=(t,e={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let n,r=0,o=t.displayName||t.name||"<anonymous>",i=function(...s){if(F.set(i,++r),r===1)n=t.apply(this,s),t=null;else if(e.throw===!0)throw new Error(`Function \`${o}\` can only be called once`);return n};return ft(i,t),F.set(i,r),i};Ie.callCount=t=>{if(!F.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return F.get(t)};var ve=Ie;var Le=S(require("node:process"),1);var $e=require("node:os");var Oe=()=>{let t=Re-Ge+1;return Array.from({length:t},br)},br=(t,e)=>({name:`SIGRT${e+1}`,number:Ge+e,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),Ge=34,Re=64;var Ne=require("node:os");var ke=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var lt=()=>{let t=Oe();return[...ke,...t].map(xr)},xr=({name:t,number:e,description:n,action:r,forced:o=!1,standard:i})=>{let{signals:{[t]:s}}=Ne.constants,a=s!==void 0;return{name:t,number:a?s:e,description:n,supported:a,action:r,forced:o,standard:i}};var wr=()=>{let t=lt();return Object.fromEntries(t.map(Er))},Er=({name:t,number:e,description:n,supported:r,action:o,forced:i,standard:s})=>[t,{name:t,number:e,description:n,supported:r,action:o,forced:i,standard:s}],je=wr(),Pr=()=>{let t=lt(),e=64+1,n=Array.from({length:e},(r,o)=>Tr(o,t));return Object.assign({},...n)},Tr=(t,e)=>{let n=Ar(t,e);if(n===void 0)return{};let{name:r,description:o,supported:i,action:s,forced:a,standard:c}=n;return{[t]:{name:r,number:t,description:o,supported:i,action:s,forced:a,standard:c}}},Ar=(t,e)=>{let n=e.find(({name:r})=>$e.constants.signals[r]===t);return n!==void 0?n:e.find(r=>r.number===t)},Yo=Pr();var Cr=({timedOut:t,timeout:e,errorCode:n,signal:r,signalDescription:o,exitCode:i,isCanceled:s})=>t?`timed out after ${e} milliseconds`:s?"was canceled":n!==void 0?`failed with ${n}`:r!==void 0?`was killed with ${r} (${o})`:i!==void 0?`failed with exit code ${i}`:"failed",O=({stdout:t,stderr:e,all:n,error:r,signal:o,exitCode:i,command:s,escapedCommand:a,timedOut:c,isCanceled:u,killed:f,parsed:{options:{timeout:m,cwd:p=Le.default.cwd()}}})=>{i=i===null?void 0:i,o=o===null?void 0:o;let g=o===void 0?void 0:je[o].description,h=r&&r.code,P=`Command ${Cr({timedOut:c,timeout:m,errorCode:h,signal:o,signalDescription:g,exitCode:i,isCanceled:u})}: ${s}`,N=Object.prototype.toString.call(r)==="[object Error]",$=N?`${P}
${r.message}`:P,j=[$,e,t].filter(Boolean).join(`
`);return N?(r.originalMessage=r.message,r.message=j):r=new Error(j),r.shortMessage=$,r.command=s,r.escapedCommand=a,r.exitCode=i,r.signal=o,r.signalDescription=g,r.stdout=t,r.stderr=e,r.cwd=p,n!==void 0&&(r.all=n),"bufferedData"in r&&delete r.bufferedData,r.failed=!0,r.timedOut=!!c,r.isCanceled=u,r.killed=f&&!c,r};var M=["stdin","stdout","stderr"],Ir=t=>M.some(e=>t[e]!==void 0),Be=t=>{if(!t)return;let{stdio:e}=t;if(e===void 0)return M.map(r=>t[r]);if(Ir(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${M.map(r=>`\`${r}\``).join(", ")}`);if(typeof e=="string")return e;if(!Array.isArray(e))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof e}\``);let n=Math.max(e.length,M.length);return Array.from({length:n},(r,o)=>e[o])};var Fe=S(require("node:os"),1);var w=[];w.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&w.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&w.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var _=t=>!!t&&typeof t=="object"&&typeof t.removeListener=="function"&&typeof t.emit=="function"&&typeof t.reallyExit=="function"&&typeof t.listeners=="function"&&typeof t.kill=="function"&&typeof t.pid=="number"&&typeof t.on=="function",dt=Symbol.for("signal-exit emitter"),pt=globalThis,vr=Object.defineProperty.bind(Object),mt=class{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(pt[dt])return pt[dt];vr(pt,dt,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(e,n){this.listeners[e].push(n)}removeListener(e,n){let r=this.listeners[e],o=r.indexOf(n);o!==-1&&(o===0&&r.length===1?r.length=0:r.splice(o,1))}emit(e,n,r){if(this.emitted[e])return!1;this.emitted[e]=!0;let o=!1;for(let i of this.listeners[e])o=i(n,r)===!0||o;return e==="exit"&&(o=this.emit("afterExit",n,r)||o),o}},D=class{},Or=t=>({onExit(e,n){return t.onExit(e,n)},load(){return t.load()},unload(){return t.unload()}}),ht=class extends D{onExit(){return()=>{}}load(){}unload(){}},yt=class extends D{#s=gt.platform==="win32"?"SIGINT":"SIGHUP";#e=new mt;#t;#o;#i;#r={};#n=!1;constructor(e){super(),this.#t=e,this.#r={};for(let n of w)this.#r[n]=()=>{let r=this.#t.listeners(n),{count:o}=this.#e,i=e;if(typeof i.__signal_exit_emitter__=="object"&&typeof i.__signal_exit_emitter__.count=="number"&&(o+=i.__signal_exit_emitter__.count),r.length===o){this.unload();let s=this.#e.emit("exit",null,n),a=n==="SIGHUP"?this.#s:n;s||e.kill(e.pid,a)}};this.#i=e.reallyExit,this.#o=e.emit}onExit(e,n){if(!_(this.#t))return()=>{};this.#n===!1&&this.load();let r=n?.alwaysLast?"afterExit":"exit";return this.#e.on(r,e),()=>{this.#e.removeListener(r,e),this.#e.listeners.exit.length===0&&this.#e.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#e.count+=1;for(let e of w)try{let n=this.#r[e];n&&this.#t.on(e,n)}catch{}this.#t.emit=(e,...n)=>this.#c(e,...n),this.#t.reallyExit=e=>this.#a(e)}}unload(){this.#n&&(this.#n=!1,w.forEach(e=>{let n=this.#r[e];if(!n)throw new Error("Listener not defined for signal: "+e);try{this.#t.removeListener(e,n)}catch{}}),this.#t.emit=this.#o,this.#t.reallyExit=this.#i,this.#e.count-=1)}#a(e){return _(this.#t)?(this.#t.exitCode=e||0,this.#e.emit("exit",this.#t.exitCode,null),this.#i.call(this.#t,this.#t.exitCode)):0}#c(e,...n){let r=this.#o;if(e==="exit"&&_(this.#t)){typeof n[0]=="number"&&(this.#t.exitCode=n[0]);let o=r.call(this.#t,e,...n);return this.#e.emit("exit",this.#t.exitCode,null),o}else return r.call(this.#t,e,...n)}},gt=globalThis.process,{onExit:Ue,load:ri,unload:oi}=Or(_(gt)?new yt(gt):new ht);var Gr=1e3*5,Me=(t,e="SIGTERM",n={})=>{let r=t(e);return Rr(t,e,n,r),r},Rr=(t,e,n,r)=>{if(!kr(e,n,r))return;let o=$r(n),i=setTimeout(()=>{t("SIGKILL")},o);i.unref&&i.unref()},kr=(t,{forceKillAfterTimeout:e},n)=>Nr(t)&&e!==!1&&n,Nr=t=>t===Fe.default.constants.signals.SIGTERM||typeof t=="string"&&t.toUpperCase()==="SIGTERM",$r=({forceKillAfterTimeout:t=!0})=>{if(t===!0)return Gr;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},_e=(t,e)=>{t.kill()&&(e.isCanceled=!0)},jr=(t,e,n)=>{t.kill(e),n(Object.assign(new Error("Timed out"),{timedOut:!0,signal:e}))},De=(t,{timeout:e,killSignal:n="SIGTERM"},r)=>{if(e===0||e===void 0)return r;let o,i=new Promise((a,c)=>{o=setTimeout(()=>{jr(t,n,c)},e)}),s=r.finally(()=>{clearTimeout(o)});return Promise.race([i,s])},qe=({timeout:t})=>{if(t!==void 0&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)},ze=async(t,{cleanup:e,detached:n},r)=>{if(!e||n)return r;let o=Ue(()=>{t.kill()});return r.finally(()=>{o()})};var We=require("node:fs"),He=require("node:child_process");function q(t){return t!==null&&typeof t=="object"&&typeof t.pipe=="function"}function St(t){return q(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object"}var Lr=t=>t instanceof He.ChildProcess&&typeof t.then=="function",bt=(t,e,n)=>{if(typeof n=="string")return t[e].pipe((0,We.createWriteStream)(n)),t;if(St(n))return t[e].pipe(n),t;if(!Lr(n))throw new TypeError("The second argument must be a string, a stream or an Execa child process.");if(!St(n.stdin))throw new TypeError("The target child process's stdin must be available.");return t[e].pipe(n.stdin),n},Ke=t=>{t.stdout!==null&&(t.pipeStdout=bt.bind(void 0,t,"stdout")),t.stderr!==null&&(t.pipeStderr=bt.bind(void 0,t,"stderr")),t.all!==void 0&&(t.pipeAll=bt.bind(void 0,t,"all"))};var V=require("node:fs"),sn=require("node:timers/promises");var G=async(t,{init:e,convertChunk:n,getSize:r,truncateChunk:o,addChunk:i,getFinalChunk:s,finalize:a},{maxBuffer:c=Number.POSITIVE_INFINITY}={})=>{if(!Ur(t))throw new Error("The first argument must be a Readable, a ReadableStream, or an async iterable.");let u=e();u.length=0;try{for await(let f of t){let m=Fr(f),p=n[m](f,u);Ye({convertedChunk:p,state:u,getSize:r,truncateChunk:o,addChunk:i,maxBuffer:c})}return Br({state:u,convertChunk:n,getSize:r,truncateChunk:o,addChunk:i,getFinalChunk:s,maxBuffer:c}),a(u)}catch(f){throw f.bufferedData=a(u),f}},Br=({state:t,getSize:e,truncateChunk:n,addChunk:r,getFinalChunk:o,maxBuffer:i})=>{let s=o(t);s!==void 0&&Ye({convertedChunk:s,state:t,getSize:e,truncateChunk:n,addChunk:r,maxBuffer:i})},Ye=({convertedChunk:t,state:e,getSize:n,truncateChunk:r,addChunk:o,maxBuffer:i})=>{let s=n(t),a=e.length+s;if(a<=i){Xe(t,e,o,a);return}let c=r(t,i-e.length);throw c!==void 0&&Xe(c,e,o,i),new z},Xe=(t,e,n,r)=>{e.contents=n(t,e,r),e.length=r},Ur=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",Fr=t=>{let e=typeof t;if(e==="string")return"string";if(e!=="object"||t===null)return"others";if(globalThis.Buffer?.isBuffer(t))return"buffer";let n=Ve.call(t);return n==="[object ArrayBuffer]"?"arrayBuffer":n==="[object DataView]"?"dataView":Number.isInteger(t.byteLength)&&Number.isInteger(t.byteOffset)&&Ve.call(t.buffer)==="[object ArrayBuffer]"?"typedArray":"others"},{toString:Ve}=Object.prototype,z=class extends Error{name="MaxBufferError";constructor(){super("maxBuffer exceeded")}};var xt=t=>t,wt=()=>{},Et=({contents:t})=>t,W=t=>{throw new Error(`Streams in object mode are not supported: ${String(t)}`)},H=t=>t.length;async function Pt(t,e){return G(t,Xr,e)}var Mr=()=>({contents:new ArrayBuffer(0)}),_r=t=>Dr.encode(t),Dr=new TextEncoder,Qe=t=>new Uint8Array(t),Ze=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),qr=(t,e)=>t.slice(0,e),zr=(t,{contents:e,length:n},r)=>{let o=en()?Hr(e,r):Wr(e,r);return new Uint8Array(o).set(t,n),o},Wr=(t,e)=>{if(e<=t.byteLength)return t;let n=new ArrayBuffer(tn(e));return new Uint8Array(n).set(new Uint8Array(t),0),n},Hr=(t,e)=>{if(e<=t.maxByteLength)return t.resize(e),t;let n=new ArrayBuffer(e,{maxByteLength:tn(e)});return new Uint8Array(n).set(new Uint8Array(t),0),n},tn=t=>Je**Math.ceil(Math.log(t)/Math.log(Je)),Je=2,Kr=({contents:t,length:e})=>en()?t:t.slice(0,e),en=()=>"resize"in ArrayBuffer.prototype,Xr={init:Mr,convertChunk:{string:_r,buffer:Qe,arrayBuffer:Qe,dataView:Ze,typedArray:Ze,others:W},getSize:H,truncateChunk:qr,addChunk:zr,getFinalChunk:wt,finalize:Kr};async function K(t,e){if(!("Buffer"in globalThis))throw new Error("getStreamAsBuffer() is only supported in Node.js");try{return nn(await Pt(t,e))}catch(n){throw n.bufferedData!==void 0&&(n.bufferedData=nn(n.bufferedData)),n}}var nn=t=>globalThis.Buffer.from(t);async function Tt(t,e){return G(t,Jr,e)}var Vr=()=>({contents:"",textDecoder:new TextDecoder}),X=(t,{textDecoder:e})=>e.decode(t,{stream:!0}),Yr=(t,{contents:e})=>e+t,Qr=(t,e)=>t.slice(0,e),Zr=({textDecoder:t})=>{let e=t.decode();return e===""?void 0:e},Jr={init:Vr,convertChunk:{string:xt,buffer:X,arrayBuffer:X,dataView:X,typedArray:X,others:W},getSize:H,truncateChunk:Qr,addChunk:Yr,getFinalChunk:Zr,finalize:Et};var an=S(on(),1),cn=t=>{if(t!==void 0)throw new TypeError("The `input` and `inputFile` options cannot be both set.")},eo=({input:t,inputFile:e})=>typeof e!="string"?t:(cn(t),(0,V.readFileSync)(e)),un=t=>{let e=eo(t);if(q(e))throw new TypeError("The `input` option cannot be a stream in sync mode");return e},no=({input:t,inputFile:e})=>typeof e!="string"?t:(cn(t),(0,V.createReadStream)(e)),fn=(t,e)=>{let n=no(e);n!==void 0&&(q(n)?n.pipe(t.stdin):t.stdin.end(n))},ln=(t,{all:e})=>{if(!e||!t.stdout&&!t.stderr)return;let n=(0,an.default)();return t.stdout&&n.add(t.stdout),t.stderr&&n.add(t.stderr),n},At=async(t,e)=>{if(!(!t||e===void 0)){await(0,sn.setTimeout)(0),t.destroy();try{return await e}catch(n){return n.bufferedData}}},Ct=(t,{encoding:e,buffer:n,maxBuffer:r})=>{if(!(!t||!n))return e==="utf8"||e==="utf-8"?Tt(t,{maxBuffer:r}):e===null||e==="buffer"?K(t,{maxBuffer:r}):ro(t,r,e)},ro=async(t,e,n)=>(await K(t,{maxBuffer:e})).toString(n),dn=async({stdout:t,stderr:e,all:n},{encoding:r,buffer:o,maxBuffer:i},s)=>{let a=Ct(t,{encoding:r,buffer:o,maxBuffer:i}),c=Ct(e,{encoding:r,buffer:o,maxBuffer:i}),u=Ct(n,{encoding:r,buffer:o,maxBuffer:i*2});try{return await Promise.all([s,a,c,u])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},At(t,a),At(e,c),At(n,u)])}};var oo=(async()=>{})().constructor.prototype,io=["then","catch","finally"].map(t=>[t,Reflect.getOwnPropertyDescriptor(oo,t)]),It=(t,e)=>{for(let[n,r]of io){let o=typeof e=="function"?(...i)=>Reflect.apply(r.value,e(),i):r.value.bind(e);Reflect.defineProperty(t,n,{...r,value:o})}},pn=t=>new Promise((e,n)=>{t.on("exit",(r,o)=>{e({exitCode:r,signal:o})}),t.on("error",r=>{n(r)}),t.stdin&&t.stdin.on("error",r=>{n(r)})});var yn=require("node:buffer"),gn=require("node:child_process"),Sn=(t,e=[])=>Array.isArray(e)?[t,...e]:[t],so=/^[\w.-]+$/,ao=t=>typeof t!="string"||so.test(t)?t:`"${t.replaceAll('"','\\"')}"`,vt=(t,e)=>Sn(t,e).join(" "),Ot=(t,e)=>Sn(t,e).map(n=>ao(n)).join(" "),co=/ +/g;var mn=t=>{let e=typeof t;if(e==="string")return t;if(e==="number")return String(t);if(e==="object"&&t!==null&&!(t instanceof gn.ChildProcess)&&"stdout"in t){let n=typeof t.stdout;if(n==="string")return t.stdout;if(yn.Buffer.isBuffer(t.stdout))return t.stdout.toString();throw new TypeError(`Unexpected "${n}" stdout in template expression`)}throw new TypeError(`Unexpected "${e}" in template expression`)},hn=(t,e,n)=>n||t.length===0||e.length===0?[...t,...e]:[...t.slice(0,-1),`${t.at(-1)}${e[0]}`,...e.slice(1)],uo=({templates:t,expressions:e,tokens:n,index:r,template:o})=>{let i=o??t.raw[r],s=i.split(co).filter(Boolean),a=hn(n,s,i.startsWith(" "));if(r===e.length)return a;let c=e[r],u=Array.isArray(c)?c.map(f=>mn(f)):[mn(c)];return hn(a,u,i.endsWith(" "))},Gt=(t,e)=>{let n=[];for(let[r,o]of t.entries())n=uo({templates:t,expressions:e,tokens:n,index:r,template:o});return n};var bn=require("node:util"),xn=S(require("node:process"),1),wn=(0,bn.debuglog)("execa").enabled,Y=(t,e)=>String(t).padStart(e,"0"),fo=()=>{let t=new Date;return`${Y(t.getHours(),2)}:${Y(t.getMinutes(),2)}:${Y(t.getSeconds(),2)}.${Y(t.getMilliseconds(),3)}`},Rt=(t,{verbose:e})=>{e&&xn.default.stderr.write(`[${fo()}] ${t}
`)};var lo=1e3*1e3*100,po=({env:t,extendEnv:e,preferLocal:n,localDir:r,execPath:o})=>{let i=e?{...R.default.env,...t}:t;return n?Ce({env:i,cwd:r,execPath:o}):i},Cn=(t,e,n={})=>{let r=An.default._parse(t,e,n);return t=r.command,e=r.args,n=r.options,n={maxBuffer:lo,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:n.cwd||R.default.cwd(),execPath:R.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,verbose:wn,...n},n.env=po(n),n.stdio=Be(n),R.default.platform==="win32"&&Tn.default.basename(t,".exe")==="cmd"&&e.unshift("/q"),{file:t,args:e,options:n,parsed:r}},k=(t,e,n)=>typeof e!="string"&&!Pn.Buffer.isBuffer(e)?n===void 0?void 0:"":t.stripFinalNewline?ut(e):e;function Z(t,e,n){let r=Cn(t,e,n),o=vt(t,e),i=Ot(t,e);Rt(i,r.options),qe(r.options);let s;try{s=Q.default.spawn(r.file,r.args,r.options)}catch(g){let h=new Q.default.ChildProcess,b=Promise.reject(O({error:g,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:r,timedOut:!1,isCanceled:!1,killed:!1}));return It(h,b),h}let a=pn(s),c=De(s,r.options,a),u=ze(s,r.options,c),f={isCanceled:!1};s.kill=Me.bind(null,s.kill.bind(s)),s.cancel=_e.bind(null,s,f);let p=ve(async()=>{let[{error:g,exitCode:h,signal:b,timedOut:P},N,$,j]=await dn(s,r.options,u),kt=k(r.options,N),Nt=k(r.options,$),$t=k(r.options,j);if(g||h!==0||b!==null){let jt=O({error:g,exitCode:h,signal:b,stdout:kt,stderr:Nt,all:$t,command:o,escapedCommand:i,parsed:r,timedOut:P,isCanceled:f.isCanceled||(r.options.signal?r.options.signal.aborted:!1),killed:s.killed});if(!r.options.reject)return jt;throw jt}return{command:o,escapedCommand:i,exitCode:0,stdout:kt,stderr:Nt,all:$t,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return fn(s,r.options),s.all=ln(s,r.options),Ke(s),It(s,p),s}function mo(t,e,n){let r=Cn(t,e,n),o=vt(t,e),i=Ot(t,e);Rt(i,r.options);let s=un(r.options),a;try{a=Q.default.spawnSync(r.file,r.args,{...r.options,input:s})}catch(f){throw O({error:f,stdout:"",stderr:"",all:"",command:o,escapedCommand:i,parsed:r,timedOut:!1,isCanceled:!1,killed:!1})}let c=k(r.options,a.stdout,a.error),u=k(r.options,a.stderr,a.error);if(a.error||a.status!==0||a.signal!==null){let f=O({stdout:c,stderr:u,error:a.error,signal:a.signal,exitCode:a.status,command:o,escapedCommand:i,parsed:r,timedOut:a.error&&a.error.code==="ETIMEDOUT",isCanceled:!1,killed:a.signal!==null});if(!r.options.reject)return f;throw f}return{command:o,escapedCommand:i,exitCode:0,stdout:c,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}var ho=({input:t,inputFile:e,stdio:n})=>t===void 0&&e===void 0&&n===void 0?{stdin:"inherit"}:{},En=(t={})=>({preferLocal:!0,...ho(t),...t});function In(t){function e(n,...r){if(!Array.isArray(n))return In({...t,...n});let[o,...i]=Gt(n,r);return Z(o,i,En(t))}return e.sync=(n,...r)=>{if(!Array.isArray(n))throw new TypeError("Please use $(options).sync`command` instead of $.sync(options)`command`.");let[o,...i]=Gt(n,r);return mo(o,i,En(t))},e}var Qi=In();var vn=require("fs/promises"),On=require("os"),x=require("path"),J=require("react"),d=require("react/jsx-runtime"),E=(0,x.resolve)((0,On.homedir)(),".kit"),Gn=(0,x.resolve)(E,"kar");function Rn(t){let[e,n]=(0,J.useState)();return(0,J.useEffect)(()=>{let r=(0,x.resolve)(E,"db","scripts.json");(0,vn.readFile)(r).then(o=>o.toString()).then(JSON.parse).then(o=>n(o.scripts))},[]),t.launchContext?.scriptPath?((0,l.popToRoot)(),(0,l.closeMainWindow)(),Z("/bin/bash",[Gn,t.launchContext.scriptPath]),null):(0,d.jsx)(l.List,{isLoading:typeof e>"u",children:e?.filter(r=>!r.exclude).map(r=>(0,d.jsx)(l.List.Item,{title:r.name,subtitle:r.description,accessories:[{text:r.kenv}],actions:(0,d.jsxs)(l.ActionPanel,{children:[(0,d.jsxs)(l.ActionPanel.Section,{children:[(0,d.jsx)(I,{scriptPath:r.filePath}),(0,d.jsx)(l.Action.CreateQuicklink,{quicklink:{name:r.name,link:`raycast://extensions/pomdtr/script-kit/run-script?context=${encodeURIComponent(JSON.stringify({scriptPath:r.filePath}))}`}})]}),(0,d.jsxs)(l.ActionPanel.Section,{children:[(0,d.jsx)(go,{}),(0,d.jsx)(So,{})]}),(0,d.jsxs)(l.ActionPanel.Section,{children:[(0,d.jsx)(bo,{scriptPath:r.filePath}),(0,d.jsx)(xo,{scriptPath:r.filePath}),(0,d.jsx)(yo,{scriptPath:r.filePath})]})]})},r.command))})}function yo(t){return(0,d.jsx)(I,{title:"Remove Script",icon:l.Icon.Trash,scriptPath:(0,x.resolve)(E,"cli","remove.js"),args:[t.scriptPath]})}function go(){return(0,d.jsx)(I,{title:"New Script",icon:l.Icon.Plus,scriptPath:(0,x.resolve)(E,"cli","new.js")})}function So(){return(0,d.jsx)(I,{title:"New Script from Url",icon:l.Icon.Link,scriptPath:(0,x.resolve)(E,"cli","new-from-url.js")})}function bo(t){return(0,d.jsx)(I,{title:"Share Script as Gist",icon:l.Icon.Upload,scriptPath:(0,x.resolve)(E,"cli","share-script.js"),args:[t.scriptPath]})}function xo(t){return(0,d.jsx)(I,{title:"Edit Script",icon:l.Icon.Pencil,scriptPath:(0,x.resolve)(E,"cli","edit.js"),args:[t.scriptPath]})}function I(t){return(0,d.jsx)(l.Action,{title:t.title||"Run Script",icon:t.icon||l.Icon.Terminal,onAction:async()=>{try{await Z("/bin/bash",[Gn,t.scriptPath,...t.args||[]]),await(0,l.closeMainWindow)(),await(0,l.popToRoot)()}catch{(0,l.showToast)(l.Toast.Style.Failure,"Could not connect to Kit","Please check that Kit is running")}}})}
